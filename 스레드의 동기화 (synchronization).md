
### Synchronization

#### **스레드의 동기화 - 한 스레드가 진행중인 작업을 다른 스레드가 간섭하지 못하게 막는 것.**

- 멀티 스레드 프로세스에서는 다른 스레드의 작업에 영향을 미칠 수 있다.

- 진행 중인 작업이 다른 스레드에게 간섭받지 않게 하려면 동기화가 필요 

- 동기화 하려면 간섭받지 않아야 하는 문장들을 **[[임계 영역]]** 으로 설정

- synchronized로 지정된 임계영역은 한 스레드가 이 영역에 접근하여 사용할때 lock이 걸림으로써 다른 스레드가 접근할 수 없게 됩니다.

- 이후 해당 스레드가 이 임계영역의 코드를 다 실행 후 벗어나게되면 unlock 상태가 되어 그때서야 대기하고 있던 다른 스레드가 이 임계영역에 접근하여 다시 lock을 걸고 사용할 수 있게 됩니다.

- lock은 해당 객체마다 하나씩 가지고 있으며 **synchronized로 설정된 임계영역은 lock 권한을 얻은 하나의 객체만이 독점적으로 사용**하게됩니다.

- #### synchronized로 [[임계 영역]](lock이 걸리는 영역)을 설정하는 방법 2가지
	- 1. 메소드 전체를 임계 영역으로 지정
		```java
		public synchronized void calcSum() { // -> 임계 영역(critical section)
			...
		}
		```
	- 2. 특정한 영역을 임계 영역으로 지정
	```java
		synchronized(객체의 참조변수) {
			...
		}	
	```

#### 동기화 단점

- 임계영역에 스레드 하나 밖에 못들어가니까 효율성이 떨어짐.
- 효율성이 높이기 위해서 [[wait()]], [[notify()]]
- 코드를 잘못 만들면 [[교착상태(Dead Lock)]]가 일어난다.

#### ArrayList는 동기화 되지 않는다.