
### Pool 이란?

- 컴퓨터 과학에서의 풀은 자원을 사용하는 시점에 메모리에 올리고 사용을 완료한 이후 메모리에서 해제하는 대신 **이미 사용할 준비가 된 자원을 메모리 위에 일정량 미리 생성해둔 자원의 집합이다.** 
- 자원이 필요한 경우 새로 자원을 생성하는 대신 풀에서 꺼내 사용하고 사용이 완료된 경우 자원을 해제 하는 대신 풀에 다시 반환하는 형태로 사용한다.

- 미리 자원을 생성해두면 어떤 이점이 있나?
	- 자원을 필요할 때 자원의 생성, 파괴 비용을 절약할 수 있다. -> 오버헤드를 줄일 수 있다.
	- 데이터베이스 혹은 소켓 등은 상대방과 연결하기 위해 꽤 오랜 시간이 걸린다. 여기서 미리 커넥션을 생성해두고, 이 커넥션을 재사용하는 방식을 사용하면 애플리케이션의 성능을 개선할 수 있을 것이다.


### Thread Pool

![자바 쓰레드 풀 구조](https://hudi.blog/static/465bd2c4d428de2345793e86cc4f5d7d/ca1dc/thread-pool.png)

- 스레드를 미리 생성하고, 작업 요청이 발생 할 때 마다 미리 생성된 스레드로 해당 작업을 처리하는 방식을 의미한다. 이 때, 작업이 끝난 스레드는 종료되지 않으며 다음 작업 요청이 들어올 때까지 대기한다.

- 왜 작업이 들어 올 때마다 스레드를 생성하고 작업을 할당하면 안되나?
	- 작업이 끝난 스레드를 파괴 할 때 오버헤드 발생하기 때문
	- 너무 많은 스레드가 제한된 하드웨어 리소스를 공유하게 되는 문제도 발생한다.
	- 스레들 풀을 사용하면 모든 것이 해결 된다.

#### Thread Pool 이점

- 스레드 폭증으로 인한 애플리케이션 성능 저하를 방지 할 수 있다.
- 스레드를 제한된 개수로 생성한 뒤, 들어오는 작업을 작업 큐(task queue)에 채워 넣은 뒤 스레드 별로 할당하여 작업을 처리한다.
- 웹 어플리케이션 서버와 같이 병렬 처리가 잦은 프로그램에서 사용하기 적합하다.

#### Thread Pool 주의 할 점

- Deadlock(교착 상태)
- Thread Leakage
	- 비정상 종료에 의한 실행 종료
- Resource Thrashing
	- 지나치게 큰 스레드 풀을 사용할 경우, 스레드 간 컨텍스트 전환시 느려지는 문제가 발생할 수 있다.